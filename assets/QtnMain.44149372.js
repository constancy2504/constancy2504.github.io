import{a as N,b as q,Q as B}from"./QCardActions.83323f4b.js";import{a as g}from"./QBtn.ba962401.js";import{Q as D,a as M}from"./QCard.49921413.js";import{a as A,b as F,i as I}from"./QTable.5eac87e4.js";import{Q as O,a as m}from"./QTr.c2e3aa2d.js";import{u as b,r as z,c as Y,a as L,s as E}from"./cmmOptions.b051ad32.js";import{Q as H}from"./QPagination.69460cbf.js";import{S as j,a as G,Q as J,_ as K}from"./QtnDetailModal.91dca9ce.js";import{r as i,d as W,aA as f,u as C,F as X,E as k,y as e,x as o,v as Z,z as ee,A as u,B as v,H as ae}from"./index.e28e6c2f.js";import"./use-panel.cd3356c5.js";import"./touch.3df10340.js";import"./QList.7e02a109.js";import"./use-dark.8df0815c.js";import"./render.d7098c4d.js";import"./QInput.71083104.js";import"./axios.6e1fcf85.js";const te={class:"q-ma-md"},le={class:"q-pa-lg flex flex-center"},oe={class:"q-ma-md"},Qe={__name:"QtnMain",setup(ne){const d=i(1),y=i(10),Q=i(),_=i(),w=i([]),p=i({qtnTitle:"",mltpYn:"",useYn:""});W(()=>{c()});const V=()=>{c()},x=()=>{E(),c()},P=a=>{n.value.rows=a;let l=n.value.totalRowsCnt/(n.value.currentPage*a);n.value.currentPage=l===0?1:l,c()},c=async()=>{console.log("getQtnList();"),f.show(),await b("/api/zion/rus/qtn/list",{method:"post",params:{rows:n.value.rows,currentPage:n.value.currentPage,qtnTitle:p.value.qtnTitle,mltpYn:p.value.mltpYn,useYn:p.value.useYn}}).then(a=>{if(a.data.header.code==="I001"){w.value=[];const l=a.data.body,t=a.data.body.list;if(t.length>0){const r=t;for(let s=0;s<r.length;s++){let h=r[s];h.idx=s+1,h.checked=!1,w.value.push(h)}}n.value.max=l.totalPageCnt,n.value.totalRowsCnt=l.totalRowsCnt}else alert(a.data.header.message)}).finally(()=>{f.hide()})},R=()=>{console.log("rgstQtn"),_.value.modalOpen()},T=a=>{console.log("item : ",a),Q.value.modalOpen(a.row)},S=async a=>{console.log("toggle item : ",a);let l=a.row.useYn==="Y"?`'${a.row.qtnTitle}' \uC758 \uC0AC\uC6A9\uC744 \uC911\uB2E8\uD558\uC2DC\uACA0\uC2B5\uB2C8\uAE4C?`:`'${a.row.qtnTitle}' \uC758 \uC0AC\uC6A9\uC744 \uC7AC\uAC1C\uD558\uC2DC\uACA0\uC2B5\uB2C8\uAE4C?`;if(confirm(l)){console.log("logic...");let r=a.row.useYn==="Y"?"N":"Y";f.show(),await $(a,r).then(s=>{console.log("res : ",s),s.data.header.code==="I001"?a.row.useYn=r:alert(s.data.header.message)}).catch(s=>{console.error(s)}).finally(()=>{f.hide()})}},U=()=>{console.log("delete...")},$=(a,l)=>b("/api/zion/rus/qtn/use/update",{method:"put",params:{useYn:l,qtnSeq:a.row.qtnSeq}}),n=i({max:0,rows:10,currentPage:1,totalRowsCnt:0});return(a,l)=>(C(),X(ae,null,[k("div",te,[e(B,{modelValue:d.value,"onUpdate:modelValue":l[2]||(l[2]=t=>d.value=t),ref:"stepper","alternative-labels":"",color:"primary",animated:""},{navigation:o(()=>[e(N,null,{default:o(()=>[e(g,{onClick:l[0]||(l[0]=t=>a.$refs.stepper.next()),color:"primary",label:d.value===3?"Finish":"Continue"},null,8,["label"]),d.value>1?(C(),Z(g,{key:0,flat:"",color:"primary",onClick:l[1]||(l[1]=t=>a.$refs.stepper.previous()),label:"Back",class:"q-ml-sm"})):ee("",!0)]),_:1})]),default:o(()=>[e(q,{name:1,title:"1\uB2E8\uACC4",caption:"\uC870\uD68C",icon:"settings",done:d.value>1},{default:o(()=>[u(" \uBB38\uC81C\uB97C \uAC80\uC0C9\uD558\uC138\uC694. ")]),_:1},8,["done"]),e(q,{name:2,title:"2\uB2E8\uACC4",caption:"\uB4F1\uB85D",icon:"create_new_folder",done:d.value>2},{default:o(()=>[u(" \uB4F1\uB85D\uBC84\uD2BC\uC744 \uD1B5\uD574 \uC0C8\uB85C\uC6B4 \uBB38\uC81C\uB97C \uB4F1\uB85D\uD560 \uC218 \uC788\uC2B5\uB2C8\uB2E4. ")]),_:1},8,["done"]),e(q,{name:3,title:"3\uB2E8\uACC4",caption:"\uC218\uC815/\uC0AD\uC81C",icon:"add_comment"},{default:o(()=>[u(" \uB4F1\uB85D\uB41C \uBB38\uC81C\uB97C \uC218\uC815/\uC0AD\uC81C \uD560 \uC218 \uC788\uC2B5\uB2C8\uB2E4. ")]),_:1})]),_:1},8,["modelValue"])]),e(M,{class:"q-ma-md q-pb-md"},{default:o(()=>[e(D,{class:"q-gutter-sm row"},{default:o(()=>[e(j,{item:p.value,onSrchList:c},null,8,["item"])]),_:1}),e(A,{class:"q-mt-md",title:"\uAC1C\uAC15\uBAA9\uB85D",rows:w.value,columns:G,label:z,color:"amber","hide-pagination":"",pagination:{rowsPerPage:0},"row-key":"name"},{"top-right":o(()=>[e(F,{"map-options":"","emit-value":"",modelValue:y.value,"onUpdate:modelValue":[l[3]||(l[3]=t=>y.value=t),P],options:Y,label:Y,"option-value":"value","option-label":"label"},null,8,["modelValue","options","label"])]),body:o(t=>[e(O,{class:"no-wrap text-center"},{default:o(()=>[e(m,{key:"checked",style:{width:"100px"}},{default:o(()=>[e(I,{modelValue:t.row.checked,"onUpdate:modelValue":r=>t.row.checked=r},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),e(m,{key:"qtnTitle",class:"cursor-pointer",onClick:r=>T(t)},{default:o(()=>[u(v(t.row.qtnTitle),1)]),_:2},1032,["onClick"]),e(m,{key:"mltpYn"},{default:o(()=>[u(v(t.row.mltpYn),1)]),_:2},1024),e(m,{key:"useYn"},{default:o(()=>[e(L,{"true-value":"Y","false-value":"N","model-value":t.row.useYn,"onUpdate:modelValue":r=>S(t)},null,8,["model-value","onUpdate:modelValue"])]),_:2},1024),e(m,{key:"frstRegDate"},{default:o(()=>[u(v(t.row.frstRegDate),1)]),_:2},1024),e(m,{key:"frstRegDate"},{default:o(()=>[u(v(t.row.frstRegId),1)]),_:2},1024)]),_:2},1024)]),_:1},8,["rows","columns","label"]),k("div",le,[e(H,{modelValue:n.value.currentPage,"onUpdate:modelValue":[l[4]||(l[4]=t=>n.value.currentPage=t),x],max:n.value.max},null,8,["modelValue","max"])]),k("div",oe,[e(g,{class:"q-mr-md",color:"primary",label:"\uB4F1\uB85D",onClick:R}),e(g,{class:"q-mr-md",color:"white","text-color":"black",label:"\uC0AD\uC81C",onClick:U})])]),_:1}),e(J,{ref_key:"qtnRgstModal",ref:_,onInsertFinish:V},null,512),e(K,{ref_key:"qtnDetailModal",ref:Q},null,512)],64))}};export{Qe as default};
